package db
[
  {
    "Title": "Battle: Los Angeles",
    "Description": "When once distant UFOs become a terrifying threat attacking Earth, a Marine staff sergeant and his team take it upon themselves to face the enemy and protect what remains of the planet.",
    "CreatedAt": "2011-03-08T00:00:00.000Z",
    "UpdatedAt": "2011-03-08T00:00:00.000Z",
    "DeletedAt": null,
    "Poster": "https://image.tmdb.org/t/p/w500//jloyGeVYZSxM9zsLFvVOWuj2ey4.jpg"
  },
  {
    "Title": "Alita: Battle Angel",
    "Description": "When Alita awakens with no memory of who she is in a future world she does not recognize, she is taken in by Ido, a compassionate doctor who realizes that somewhere in this abandoned cyborg shell is the heart and soul of a young woman with an extraordinary past.",
    "CreatedAt": "2019-01-31T00:00:00.000Z",
    "UpdatedAt": "2019-01-31T00:00:00.000Z",
    "DeletedAt": null,
    "Poster": "https://image.tmdb.org/t/p/w500//xRWht48C2V8XNfzvPehyClOvDni.jpg"
  },
  {
    "Title": "Batman and Superman: Battle of the Super Sons",
    "Description": "After discovering he has powers, 11-year-old Jonathan Kent and assassin-turned-Boy-Wonder Damian Wayne must join forces to rescue their fathers (Superman & Batman) and save the planet from the malevolent alien force known as Starro.",
    "CreatedAt": "2022-10-17T00:00:00.000Z",
    "UpdatedAt": "2022-10-17T00:00:00.000Z",
    "DeletedAt": null,
    "Poster": "https://image.tmdb.org/t/p/w500//nBaVsNvUxIuvhPw3xTaAJIw8me4.jpg"
  },
  {
    "Title": "Battle: Freestyle",
    "Description": "Amalie and Mikael lead their street dance team to the finals in France but tough competition and personal distractions threaten to ruin their dreams.",
    "CreatedAt": "2022-04-01T00:00:00.000Z",
    "UpdatedAt": "2022-04-01T00:00:00.000Z",
    "DeletedAt": null,
    "Poster": "https://image.tmdb.org/t/p/w500//6D6QumiHEhnpZG12Ibjy2BxA6n4.jpg"
  },
  {
    "Title": "The Hobbit: The Battle of the Five Armies",
    "Description": "Immediately after the events of The Desolation of Smaug, Bilbo and the dwarves try to defend Erebor's mountain of treasure from others who claim it: the men of the ruined Laketown and the elves of Mirkwood. Meanwhile an army of Orcs led by Azog the Defiler is marching on Erebor, fueled by the rise of the dark lord Sauron. Dwarves, elves and men must unite, and the hope for Middle-Earth falls into Bilbo's hands.",
    "CreatedAt": "2014-12-10T00:00:00.000Z",
    "UpdatedAt": "2014-12-10T00:00:00.000Z",
    "DeletedAt": null,
    "Poster": "https://image.tmdb.org/t/p/w500//xT98tLqatZPQApyRmlPL12LtiWp.jpg"
  },
  {
    "Title": "Mortal Kombat Legends: Battle of the Realms",
    "Description": "The Earthrealm heroes must journey to the Outworld and fight for the survival of their homeland, invaded by the forces of evil warlord Shao Kahn, in the tournament to end all tournaments: the final Mortal Kombat.",
    "CreatedAt": "2021-08-30T00:00:00.000Z",
    "UpdatedAt": "2021-08-30T00:00:00.000Z",
    "DeletedAt": null,
    "Poster": "https://image.tmdb.org/t/p/w500//ablrE8IbWcIrAxMmm4gnPn75AMS.jpg"
  },
  {
    "Title": "Battle",
    "Description": "Amalie is the girl who has everything, good looks, money, a boyfriend and a big talent of dancing. One day, her world falls apart and she moves from everything she knows. Then enter Mikael. He is dancing in the streets and Amalie joins him in dancing on the streets, dancing Battles.",
    "CreatedAt": "2018-09-28T00:00:00.000Z",
    "UpdatedAt": "2018-09-28T00:00:00.000Z",
    "DeletedAt": null,
    "Poster": "https://image.tmdb.org/t/p/w500//zfGhtAX7xe7W0ZgEcM2n6tnxgc0.jpg"
  },
  {
    "Title": "Dragonheart: Battle for the Heartfire",
    "Description": "When the King Gareth dies, his potential heirs, twin grandchildren who possess the dragon’s unique strengths, use their inherited powers against each other to vie for the throne. When Drago’s source of power – known as the Heartfire – is stolen, more than the throne is at stake; the siblings must end their rivalry with swords and sorcery or the kingdom may fall.",
    "CreatedAt": "2017-07-09T00:00:00.000Z",
    "UpdatedAt": "2017-07-09T00:00:00.000Z",
    "DeletedAt": null,
    "Poster": "https://image.tmdb.org/t/p/w500//nPjqwumVHyx2nOCyZH5dpXAmhpf.jpg"
  },
  {
    "Title": "Night at the Museum: Battle of the Smithsonian",
    "Description": "Hapless museum night watchman Larry Daley must help his living, breathing exhibit friends out of a pickle now that they've been transferred to the archives at the Smithsonian Institution. Larry's (mis)adventures this time include close encounters with Amelia Earhart, Abe Lincoln and Ivan the Terrible.",
    "CreatedAt": "2009-05-20T00:00:00.000Z",
    "UpdatedAt": "2009-05-20T00:00:00.000Z",
    "DeletedAt": null,
    "Poster": "https://image.tmdb.org/t/p/w500//dNvYjzFuSSY7DCVZK7zzaZFemHt.jpg"
  },
  {
    "Title": "Battle of the Year",
    "Description": "A down-on-his-luck coach is hired to prepare a team of the best American dancers for an international tournament that attracts all the best crews from around the world, but the Americans haven't won in fifteen years.",
    "CreatedAt": "2013-09-21T00:00:00.000Z",
    "UpdatedAt": "2013-09-21T00:00:00.000Z",
    "DeletedAt": null,
    "Poster": "https://image.tmdb.org/t/p/w500//klOquwqD8LtTvm9pWc1vJH143Zb.jpg"
  },
  {
    "Title": "In Dubious Battle",
    "Description": "In the California apple country, 900 migratory workers rise 'in dubious battle' against the landowners. The group takes on a life of its own—stronger than its individual members, and more frightening. Led by the doomed Jim Nolan, the strike is founded on his tragic idealism—'courage, never submit, or yield'.",
    "CreatedAt": "2017-02-17T00:00:00.000Z",
    "UpdatedAt": "2017-02-17T00:00:00.000Z",
    "DeletedAt": null,
    "Poster": "https://image.tmdb.org/t/p/w500//bC7N0pUc6RzuDqSNHsV0VXk06Cq.jpg"
  },
  {
    "Title": "The Scorpion King 3: Battle for Redemption",
    "Description": "Since his triumphant rise to power in the original blockbuster \"The Scorpion King\", Mathayus' kingdom has fallen and he's lost his queen to plague. Now an assassin for hire, he must defend a kingdom from an evil tyrant and his ghost warriors for the chance to regain the power and glory he once knew. Starring Ron Perlman (\"Hellboy\") and Billy Zane (\"Titanic\"), and featuring 6-time WWE champion Dave Bautista and UFC star Kimbo Slice, \"The Scorpion King 3: Battle for Redemption\" takes \"The Mummy\" phenomenon to an all-new level of epic action and non-stop adventure.",
    "CreatedAt": "2012-01-17T00:00:00.000Z",
    "UpdatedAt": "2012-01-17T00:00:00.000Z",
    "DeletedAt": null,
    "Poster": "https://image.tmdb.org/t/p/w500//z1fab9fVsIV35K21ictA4GYTicI.jpg"
  },
  {
    "Title": "Battle of Los Angeles",
    "Description": "In February 1942 Us forces engaged an unidentified flying object above Los Angeles. Now almost 70 years later, the alien invaders have returned.",
    "CreatedAt": "2011-03-12T00:00:00.000Z",
    "UpdatedAt": "2011-03-12T00:00:00.000Z",
    "DeletedAt": null,
    "Poster": "https://image.tmdb.org/t/p/w500//guOIn7uP2tVVz6IcE3byMOwY13x.jpg"
  },
  {
    "Title": "Battle for Terra",
    "Description": "A peaceful alien planet faces annihilation, as the homeless remainder of the human race sets its eyes on Terra. Mala, a rebellious Terrian teenager, will do everything she can to stop it.",
    "CreatedAt": "2007-09-06T00:00:00.000Z",
    "UpdatedAt": "2007-09-06T00:00:00.000Z",
    "DeletedAt": null,
    "Poster": "https://image.tmdb.org/t/p/w500//iAcPYIsYwFqAyY7KctWkkdkJGhI.jpg"
  },
  {
    "Title": "Battle in Seattle",
    "Description": "Thousands of activists arrive in Seattle, Washington in masses to protest the WTO Ministerial Conference of 1999 (World Trade Organization). Although it began as a peaceful protest with a goal of stopping the WTO talks, it escalated into a full-scale riot and eventually, a State of Emergency that pitted protesters against the Seattle Police Department and the National Guard.",
    "CreatedAt": "2007-09-07T00:00:00.000Z",
    "UpdatedAt": "2007-09-07T00:00:00.000Z",
    "DeletedAt": null,
    "Poster": "https://image.tmdb.org/t/p/w500//jO8tKM4mCMXpLVd5GnmlfJByghF.jpg"
  },
  {
    "Title": "Battle of Britain",
    "Description": "In 1940, the Royal Air Force fights a desperate battle against the might of the Luftwaffe for control of the skies over Britain, thus preventing the Nazi invasion of Britain.",
    "CreatedAt": "1969-09-15T00:00:00.000Z",
    "UpdatedAt": "1969-09-15T00:00:00.000Z",
    "DeletedAt": null,
    "Poster": "https://image.tmdb.org/t/p/w500//panUqfhNEuLaQlACSjzRvtVWRsb.jpg"
  },
  {
    "Title": "Giantess Battle Attack",
    "Description": "The beautiful, beastly Beverly returns and faces a new gaggle of gargantuan gals, hell bent on achieving deluxe diva domination. Get ready for the cinematic smackdown thrills of Giantess Battle Attack. Size really does matter.",
    "CreatedAt": "2022-10-20T00:00:00.000Z",
    "UpdatedAt": "2022-10-20T00:00:00.000Z",
    "DeletedAt": null,
    "Poster": "https://image.tmdb.org/t/p/w500//wj6cbxh1e8h21R3FOPil19lnIkv.jpg"
  },
  {
    "Title": "Battle of the Sexes",
    "Description": "The true story of the 1973 tennis match between World number one Billie Jean King and ex-champ and serial hustler Bobby Riggs.",
    "CreatedAt": "2017-09-22T00:00:00.000Z",
    "UpdatedAt": "2017-09-22T00:00:00.000Z",
    "DeletedAt": null,
    "Poster": "https://image.tmdb.org/t/p/w500//fWy0A3VojTCb0S2MKtEJjpquubF.jpg"
  },
  {
    "Title": "Ewoks: The Battle for Endor",
    "Description": "The army of the Marauders, led by King Terak and the witch Charal, attack the Ewoks village, killing Cindel's family. Cindel and the Ewok Wicket escape and meet Teek in the forest, a naughty and very fast animal. Teek takes them to a house in which an old man, Noa, lives. Like Cindel, he also crashed with his Starcruiser on Endor. Together they fight Terak and Charal.",
    "CreatedAt": "1985-11-24T00:00:00.000Z",
    "UpdatedAt": "1985-11-24T00:00:00.000Z",
    "DeletedAt": null,
    "Poster": "https://image.tmdb.org/t/p/w500//ntgKdekb7xMKscyh2Hei706LBLf.jpg"
  },
  {
    "Title": "Battle Star Wars",
    "Description": "When the leader of the evil Coalition threatens to destroy a Rebel planet for its resources, his daughter will have no choice but to join the Rebel side and fight for what is right.",
    "CreatedAt": "2020-01-28T00:00:00.000Z",
    "UpdatedAt": "2020-01-28T00:00:00.000Z",
    "DeletedAt": null,
    "Poster": "https://image.tmdb.org/t/p/w500//ocA0ECiFoB4d1HITyEDQlLk7x84.jpg"
  }
]
import (
	"log"
	"os"
	"gorm.io/driver/postgres"
	"gorm.io/gorm"

	"github.com/pame17/Arqui-Disp/models"
)
var DB *gorm.DB
var DSN = "host="+os.Getenv("DB_HOST")+" user="+os.Getenv("DB_USERNAME")+" password="+os.Getenv("DB_PASSWORD")+" dbname="+os.Getenv("DB_DATABASE")+" port="+os.Getenv("DB_PORT")+""

func StartConnection(){
	var err error
	DB, err = gorm.Open(postgres.Open(DSN), &gorm.Config{})
	if err != nil {
		log.Fatal(err)
		return
	}
	log.Println("Database connection successful")

}
func CloseConnection(){
	sqlDB, err := DB.DB()
	if err != nil{
		log.Fatal(err)
		return
	}
	sqlDB.Close()
	log.Println("Database connection ended")
}
func InitDB(){
	StartConnection()
	DB.Migrator().DropTable(models.User{}, models.Review{}, models.Movie{}, models.Claims{})
	DB.AutoMigrate(models.User{}, models.Review{}, models.Movie{})

	user:= models.User{Username: "pame", Password: "1234"}
	user.HashPassword(user.Password)
	var fotos = map[string]
	movie1:= models.Movie{Title: "movie1", Description: "description1", Gender: "gender1"}
	movie2:= models.Movie{Title: "movie2", Description: "description2", Gender: "gender2"}
	movie3:= models.Movie{Title: "movie3", Description: "description2", Gender: "gender3"}
	review1:= models.Review{Description: "review1", Puntaje: 3, IdMovie: 1, Username: "pame"}

	DB.Create(&user)
	DB.Create(&movie1)
	DB.Create(&movie2)
	DB.Create(&movie3)
	DB.Create(&review1)

	CloseConnection()
}